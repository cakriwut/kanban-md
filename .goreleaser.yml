version: 2

before:
  hooks:
    - go mod download
builds:
  - ldflags:
      - -s -w -X github.com/antopolskiy/kanban-md/cmd.version={{.Version}}
    env:
      - CGO_ENABLED=0
    goos:
      - darwin
      - linux
      - windows
    goarch:
      - amd64
      - arm64
archives:
  - format_overrides:
      - goos: windows
        formats:
          - zip
brews:
  - repository:
      owner: antopolskiy
      name: homebrew-tap
      token: "{{ .Env.HOMEBREW_TAP_TOKEN }}"
    homepage: https://github.com/antopolskiy/kanban-md
    description: A file-based Kanban tool powered by Markdown
    license: MIT
    install: |
      bin.install "kanban-md"
      bin.install_symlink bin/"kanban-md" => "kbmd"
      generate_completions_from_executable(bin/"kanban-md", "completion")
      generate_completions_from_executable(bin/"kbmd", "completion")
release:
  github:
  name_template: "{{.Version}}"
  prerelease: auto
  mode: append
changelog:
  disable: true
